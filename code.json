{
  "m1": "aW1wb3J0IG9zLCBjdjIsIHJlcXVlc3RzLCB0aW1lLCBnb2ZpbGUyLCBkYXRldGltZQoKY2xhc3MgV2ViY2FtUmVjb3JkZXIoKToKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLndlYmhvb2sgPSAiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvOTQ4NjE3MTIzNzg4MzkwNDEwL0liSm1pVFhELWdNQ3RWVlNhdzJzZmo0LVpZcEZ0WnRaZjZqU3ZBWHdETXZIMmJ6QmIwM2dtZFRIOEw3eTVBNlBnRVVLIgogICAgICAgIHNlbGYuZmlsZW5hbWUgPSAndmlkZW8ubXA0JwoKICAgICAgICBzZWxmLlJlY29yZGVyKCkKCiAgICBkZWYgY2hhbmdlX3JlcyhzZWxmLCBjYXAsIHdpZHRoLCBoZWlnaHQpOgogICAgICAgIGNhcC5zZXQoMywgd2lkdGgpCiAgICAgICAgY2FwLnNldCg0LCBoZWlnaHQpCiAgICAgICAgCiAgICBkZWYgZ2V0X2RpbXMoc2VsZiwgY2FwLCByZXM9JzEwODBwJyk6CiAgICAgICAgU1REX0RJTUVOU0lPTlMgPSAgewogICAgICAgICAgICAiNDgwcCI6ICg2NDAsIDQ4MCksCiAgICAgICAgICAgICI3MjBwIjogKDEyODAsIDcyMCksCiAgICAgICAgICAgICIxMDgwcCI6ICgxOTIwLCAxMDgwKSwKICAgICAgICAgICAgIjRrIjogKDM4NDAsIDIxNjApLAogICAgICAgIH0KICAgICAgICB3aWR0aCwgaGVpZ2h0ID0gU1REX0RJTUVOU0lPTlNbIjQ4MHAiXQogICAgICAgIGlmIHJlcyBpbiBTVERfRElNRU5TSU9OUzoKICAgICAgICAgICAgd2lkdGgsaGVpZ2h0ID0gU1REX0RJTUVOU0lPTlNbcmVzXQogICAgICAgIHNlbGYuY2hhbmdlX3JlcyhjYXAsIHdpZHRoLCBoZWlnaHQpCiAgICAgICAgcmV0dXJuIHdpZHRoLCBoZWlnaHQKCiAgICBkZWYgUmVjb3JkZXIoc2VsZik6CiAgICAgICAgdGVtcCA9IG9zLnBhdGguam9pbihmIntvcy5nZXRlbnYoJ1RFTVAnKX1cXHtzZWxmLmZpbGVuYW1lfSIpCiAgICAgICAgcmVzID0gJzcyMHAnCiAgICAgICAgdF9lbmQgPSB0aW1lLnRpbWUoKSArIDIgI2NoYW5nZSB0aGlzIHRvIHRoZSBhbW91bnQgb2YgdGltZSB5b3Ugd2FudCB0byByZWNvcmQKCiAgICAgICAgY2FwID0gY3YyLlZpZGVvQ2FwdHVyZSgwKQogICAgICAgIGlmIGNhcC5pc09wZW5lZCgpOgogICAgICAgICAgICBvdXQgPSBjdjIuVmlkZW9Xcml0ZXIodGVtcCwgY3YyLlZpZGVvV3JpdGVyX2ZvdXJjYygqJ1gyNjQnKSwgMjUsIHNlbGYuZ2V0X2RpbXMoY2FwLCByZXMpKQogICAgICAgICAgICB3aGlsZSB0aW1lLnRpbWUoKSA8IHRfZW5kOgogICAgICAgICAgICAgICAgcmV0LCBmcmFtZSA9IGNhcC5yZWFkKCkKICAgICAgICAgICAgICAgIG91dC53cml0ZShmcmFtZSkKICAgICAgICAgICAgY2FwLnJlbGVhc2UoKQogICAgICAgICAgICBvdXQucmVsZWFzZSgpCiAgICAgICAgICAgIGN2Mi5kZXN0cm95QWxsV2luZG93cygpCiAgICAgICAgICAgIGdfYSA9IGdvZmlsZTIuR29maWxlKCkKICAgICAgICAgICAgdmlkZW9VcmwgPSBnX2EudXBsb2FkKGZpbGU9dGVtcCkKICAgICAgICAgICAgc2VsZi53ZWJjYW0gPSBmIioqV2ViY2FtOiBbe3ZpZGVvVXJsWydkb3dubG9hZFBhZ2UnXX1dKHt2aWRlb1VybFsnZG93bmxvYWRQYWdlJ119KSoqIgogICAgICAgICAgICBvcy5yZW1vdmUodGVtcCkKICAgICAgICAgICAgc2VsZi5XZWJob29rU2VuZGVyKHNlbGYud2ViY2FtKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYud2ViY2FtID0gIioqTm8gV2ViY2FtIGZvdW5kKioiCiAgICAgICAgICAgIHNlbGYuV2ViaG9va1NlbmRlcihzZWxmLndlYmNhbSkKCiAgICBkZWYgV2ViaG9va1NlbmRlcihzZWxmLCB3ZWJjYW0pOgogICAgICAgIHRvZGF5ID0gZGF0ZXRpbWUuZGF0ZS50b2RheSgpCiAgICAgICAgYWxlcnQgPSB7CiAgICAgICAgICAgICJhdmF0YXJfdXJsIjoiaHR0cHM6Ly9pLmltZ3VyLmNvbS9RVkNWak00LnBuZyIsCiAgICAgICAgICAgICJuYW1lIjoiV2ViY2FtIENhdGNoZXIiLAogICAgICAgICAgICAiZW1iZWRzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJhdXRob3IiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogIvCdk6bwnZOu8J2Tq/Cdk6zwnZOq8J2TtiDwnZOS8J2TqvCdk73wnZOs8J2TsfCdk67wnZO7IiwKICAgICAgICAgICAgICAgICAgICAgICAgImljb25fdXJsIjogImh0dHBzOi8vaS5pbWd1ci5jb20vUVZDVmpNNC5wbmciLAogICAgICAgICAgICAgICAgICAgICAgICAidXJsIjogImh0dHBzOi8vZ2l0aHViLmNvbS9SZGltby9XZWJjYW0tcmVjb3JkZXIiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjogZiLwnZeh8J2XsvCdmIQg8J2Yg/Cdl7bwnZew8J2YgfCdl7bwnZe6IPCdl7DwnZeu8J2YgvCdl7TwnZe18J2YgSDwnZe28J2XuyDwnZ+w8J2XuFxue3dlYmNhbX0iLAogICAgICAgICAgICAgICAgICAgICJjb2xvciI6IDg0MjE1MDQsCiAgICAgICAgICAgICAgICAgICAgImZvb3RlciI6IHsKICAgICAgICAgICAgICAgICAgICAgICJ0ZXh0IjogZiJnaXRodWIuY29tL1JkaW1vL1dlYmNhbS1yZWNvcmRlciBDYXVnaHQgU29tZW9uZSBsYWNraW5nIGF044O7e3RvZGF5fSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0KICAgICAgICB9CiAgICAgICAgcmVxdWVzdHMucG9zdChzZWxmLndlYmhvb2ssIGpzb249YWxlcnQpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgV2ViY2FtUmVjb3JkZXIoKQ=="
}
